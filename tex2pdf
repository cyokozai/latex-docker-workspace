#!/bin/bash

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <filename.tex>"
    exit 1
else
    filename="$1"
    basename="${filename%.*}"
fi

# platexでDVIファイルを生成
platex "$basename"

# .bib ファイルがあるか確認
if [ -e *.bib ]; then
    bibtex "$basename"
fi

# platexでDVIファイルを生成
platex "$basename"
platex "$basename"

# dvipdfmxでPDFを生成
dvipdfmx "$basename"

rm "$basename.dvi" "$basename.log" "$basename.aux" "$basename.toc" "$basename.out" "$basename.nav" "$basename.snm" "$basename.vrb" "$basename.bbl" "$basename.blg"

echo "PDF generated: $basename.pdf"
